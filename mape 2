<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Potion Shop Floorplan (5ft Squares)</title>
  <style>
    :root{
      /* D&D scale: 1 tile = 5ft */
      --tile-ft: 5;
      --tile-px: 28px;      /* visual size of a 5ft square */
      --gap: 2px;

      --bg: #0b1020;
      --panel: rgba(255,255,255,.04);
      --stroke: rgba(255,255,255,.10);
      --text: #e5e7eb;
      --muted:#94a3b8;
    }

    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1100px 800px at 20% 10%, #121c3b 0%, var(--bg) 55%, #070a14 100%);
      color: var(--text);
      display:flex;
      justify-content:center;
      padding:24px;
    }

    .wrap{
      width:min(1100px, 100%);
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:16px;
    }
    .card{
      background: linear-gradient(180deg, var(--panel), rgba(255,255,255,.02));
      border:1px solid var(--stroke);
      border-radius:16px;
      box-shadow: 0 18px 60px rgba(0,0,0,.45);
      overflow:hidden;
    }

    header{
      padding:14px 16px;
      border-bottom:1px solid var(--stroke);
      display:flex;
      justify-content:space-between;
      align-items:baseline;
      gap:12px;
    }
    header h1{
      font-size:16px;
      margin:0;
      letter-spacing:.4px;
      text-transform:uppercase;
    }
    header .sub{
      font-size:12px;
      color: var(--muted);
      white-space:nowrap;
    }

    .stage{
      padding:16px;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      overflow:auto;
    }

    /* Floorplan frame includes a ruler + grid */
    .plan{
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    /* Scale bar: shows 25ft (5 tiles) */
    .scale-bar{
      display:flex;
      align-items:center;
      gap:10px;
      color: var(--muted);
      font-size:12px;
    }
    .scale{
      display:flex;
      border:1px solid rgba(255,255,255,.18);
      border-radius:10px;
      overflow:hidden;
    }
    .scale > span{
      width: var(--tile-px);
      height: 14px;
      display:block;
      background: rgba(255,255,255,.10);
      border-right:1px solid rgba(255,255,255,.10);
    }
    .scale > span:nth-child(odd){ background: rgba(255,255,255,.18); }
    .scale > span:last-child{ border-right:none; }

    /* Grid */
    .grid{
      /* 1 cell = 5ft */
      display:grid;
      grid-template-columns: repeat(34, var(--tile-px));
      grid-template-rows: repeat(22, var(--tile-px));
      gap: var(--gap);
      padding: calc(var(--gap) * 2);
      border-radius:14px;
      outline: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      position:relative;
    }

    /* Optional: show faint 5ft gridlines inside each tile */
    .tile{
      width: var(--tile-px);
      height: var(--tile-px);
      border-radius:6px;
      border:1px solid rgba(255,255,255,.06);
      box-sizing:border-box;
      position:relative;
      user-select:none;
    }

    /* Types */
    .floor  { background: rgba(148,163,184,.14); }
    .wall   { background: rgba(31,41,55,.95); border-color: rgba(255,255,255,.08); }
    .door   { background: rgba(234,179,8,.20);  border-color: rgba(234,179,8,.35); }
    .shelf  { background: rgba(34,197,94,.16);  border-color: rgba(34,197,94,.30); }
    .counter{ background: rgba(99,102,241,.18); border-color: rgba(99,102,241,.30); }
    .work   { background: rgba(236,72,153,.16); border-color: rgba(236,72,153,.30); }
    .hazard { background: rgba(239,68,68,.16);  border-color: rgba(239,68,68,.30); }
    .water  { background: rgba(56,189,248,.16); border-color: rgba(56,189,248,.30); }
    .secret { background: rgba(167,139,250,.16);border-color: rgba(167,139,250,.30); }
    .void   { background: transparent; border-color: transparent; }

    /* Labels */
    .tile[data-label]::after{
      content: attr(data-label);
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:11px;
      color: rgba(255,255,255,.90);
      text-shadow: 0 1px 0 rgba(0,0,0,.55);
      letter-spacing:.2px;
    }

    /* Room labels */
    .room-label{
      position:absolute;
      font-size:12px;
      color: rgba(255,255,255,.92);
      background: rgba(15,23,42,.72);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 999px;
      padding: 4px 10px;
      backdrop-filter: blur(6px);
      box-shadow: 0 8px 24px rgba(0,0,0,.35);
      pointer-events:none;
      white-space:nowrap;
    }

    /* Legend */
    .legend{
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .legend h2{
      font-size:14px;
      margin:0;
      letter-spacing:.3px;
      text-transform:uppercase;
      color: rgba(255,255,255,.90);
    }
    .legend p{
      margin:0;
      color: var(--muted);
      font-size:12px;
      line-height:1.35;
    }
    .key{
      display:grid;
      grid-template-columns: 18px 1fr;
      gap:10px;
      align-items:center;
      padding:10px 10px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.18);
    }
    .swatch{ width:18px;height:18px;border-radius:6px;border:1px solid rgba(255,255,255,.18); }

    @media (max-width: 980px){
      .wrap{ grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <section class="card">
      <header>
        <h1>Mistle & Moon Apothecary</h1>
        <div class="sub">Each square = 5ft • 34×22 tiles (170ft × 110ft)</div>
      </header>

      <div class="stage">
        <div class="plan">
          <div class="scale-bar" aria-label="Scale bar">
            <div class="scale" title="5 tiles = 25ft">
              <span></span><span></span><span></span><span></span><span></span>
            </div>
            <div>25ft (5 squares)</div>
          </div>

          <div class="grid" id="grid" aria-label="Potion shop floorplan grid (5ft squares)">
            <div class="room-label" style="left: 8%; top: 7%;">Public Sales Floor</div>
            <div class="room-label" style="left: 64%; top: 42%;">Back Lab</div>
            <div class="room-label" style="left: 70%; top: 80%;">Cellar Hatch</div>
          </div>
        </div>
      </div>
    </section>

    <aside class="card">
      <div class="legend">
        <h2>Legend</h2>
        <p>Data-driven tiles. Replace MAP to generate new shops; every tile is a 5ft square.</p>

        <div class="key"><span class="swatch floor"></span><div><strong>Floor</strong><div style="color:var(--muted);font-size:12px;">Walkable area</div></div></div>
        <div class="key"><span class="swatch wall"></span><div><strong>Wall</strong><div style="color:var(--muted);font-size:12px;">Solid barrier</div></div></div>
        <div class="key"><span class="swatch door"></span><div><strong>Door</strong><div style="color:var(--muted);font-size:12px;">Access point</div></div></div>
        <div class="key"><span class="swatch shelf"></span><div><strong>Shelves</strong><div style="color:var(--muted);font-size:12px;">Potion racks / herb drawers</div></div></div>
        <div class="key"><span class="swatch counter"></span><div><strong>Counter</strong><div style="color:var(--muted);font-size:12px;">Checkout & ward-stone</div></div></div>
        <div class="key"><span class="swatch work"></span><div><strong>Work</strong><div style="color:var(--muted);font-size:12px;">Prep bench / mixing</div></div></div>
        <div class="key"><span class="swatch hazard"></span><div><strong>Hazard</strong><div style="color:var(--muted);font-size:12px;">Burners / still / volatile</div></div></div>
        <div class="key"><span class="swatch water"></span><div><strong>Water</strong><div style="color:var(--muted);font-size:12px;">Wash station / safety barrel</div></div></div>
        <div class="key"><span class="swatch secret"></span><div><strong>Secret</strong><div style="color:var(--muted);font-size:12px;">Hidden hatch / concealed access</div></div></div>

        <p style="margin-top:6px;color:var(--muted);font-size:12px;">
          Tip: A 10ft-wide hallway is 2 tiles. A Medium creature occupies 1 tile.
        </p>
      </div>
    </aside>
  </div>

  <script>
    // 34 columns × 22 rows
    // Char legend:
    //  . floor  # wall  D door  S shelf  C counter  W work  H hazard  A water  X secret hatch  ' ' void
    // Notes:
    //  - Every tile = 5ft.
    //  - Layout includes front showroom, central island, counter, staff hall, back lab, cellar hatch.
    const MAP = [
      "##################################",
      "#SSSSSSSSSS....SSSSSSSSSS....SSSS#",
      "#SSSSSSSSSS....SSSSSSSSSS....SSSS#",
      "#..D............................A#",
      "#................................#",
      "#..SSSSS.....WWWW.....SSSSS..CCCC#",
      "#..SSSSS.....WWWW.....SSSSS..CCCC#",
      "#............WWWW............CCCC#",
      "#....SSSSS...........SSSSS.......#",
      "#....SSSSS....WWWW...SSSSS.......#",
      "#............WWWW...........S....#",
      "#......CCCCCCCCCCCC........SS....#",
      "#......CCCCCCCCCCCC....D...SS....#",
      "#.......................#####....#",
      "###############..############....#",
      "#HHHHHH..W......#..............X.#",
      "#HHHHHH..W......#..WWWW..SSSSSS..#",
      "#HHHHHH..W......#..WWWW..SSSSSS..#",
      "#.......A........#...........D...#",
      "#................#...............#",
      "#................#...............#",
      "##################################"
    ];

    const tileType = (ch) => {
      switch(ch){
        case "#": return { cls: "wall", label: "" };
        case ".": return { cls: "floor", label: "" };
        case "D": return { cls: "door", label: "D" };
        case "S": return { cls: "shelf", label: "" };
        case "C": return { cls: "counter", label: "" };
        case "W": return { cls: "work", label: "" };
        case "H": return { cls: "hazard", label: "" };
        case "A": return { cls: "water", label: "A" };
        case "X": return { cls: "secret", label: "X" };
        case " ": return { cls: "void", label: "" };
        default:  return { cls: "floor", label: "" };
      }
    };

    const grid = document.getElementById("grid");
    const cols = 34;

    for (let r = 0; r < MAP.length; r++){
      const row = MAP[r];
      for (let c = 0; c < cols; c++){
        const ch = row[c] ?? " ";
        const t = tileType(ch);

        const el = document.createElement("div");
        el.className = `tile ${t.cls}`;
        if (t.label) el.dataset.label = t.label;

        // Tooltip includes real-world feet coordinates
        const ftX = (c) * 5;
        const ftY = (r) * 5;
        el.title = `Tile (${c+1}, ${r+1}) • ${ftX}ft, ${ftY}ft • ${t.cls}${t.label ? " • " + t.label : ""}`;

        grid.appendChild(el);
      }
    }
  </script>
</body>
</html>